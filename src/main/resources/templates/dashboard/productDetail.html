<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate ="~{dashboard/dashboardFragments/dashboardLayout}">
<head>
    <meta charset="UTF-8">
    <title>ÏÉÅÌíàÍ¥ÄÎ¶¨</title>

    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{../css/productDetail.css}"/>
    </th:block>
    <!-- summernote editor-->
    <script src="../summernote/summernote-lite.js"></script>
    <script src="../summernote/lang/summernote-ko-KR.js"></script>
    <link rel="stylesheet" href="../summernote/summernote-lite.css">
</head>
<body layout:fragment="content" style="-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none">
<script>
    $(document).ready(function () {
        $('#summernote').summernote({
            height: 600,
            lang: "ko-KR",
            callbacks:{
                onImageUpload: function (files){
                    for(var i=0; i < files.length; i++){
                        var formData = new FormData();
                        formData.append('file', files[i]);
                        var uploadRequest = new Promise(function (resolve,reject){
                            $.ajax({
                                type: "POST",
                                url: "/uploadSummernoteImageFile",
                                data: formData,
                                contentType: false,
                                processData: false,
                                dataType: 'json',
                                success: function (resData){
                                    resolve(resData);
                                    console.log(resData);
                                },
                                error: function (xhr, textStatus, errorThrown){
                                    reject(errorThrown);
                                }
                            });
                        });
                        uploadRequest.then(function (resData){
                            $('#summernote').summernote('insertImage', resData.src);
                            console.log(resData.src);
                        }).catch(function(error) {
                            console.error('Error uploading image:', error);
                        });
                    }
                }
            }
        });
    });

</script>

<div class="product_detail_container">
    <div th:each="product : ${product}">
    <form id="frmModifyProd" th:action="@{/modifyProduct/{productNo}(productNo=${product.productNo})}" method="post" enctype="multipart/form-data" onsubmit="return modifyCheck()">
            <input type="hidden" id="productStateValue" th:value="${product.productState}">
            <input type="hidden" id="categoryValue" name="categoryId" th:value="${product.categoryEntity.categoryId}">
            <div class="product_detail_title_dox product_detail_box">
                <div class="prodDetail_title_first">ÏÉÅÌíàÍ¥ÄÎ¶¨ > ÏÉÅÌíà Ï°∞Ìöå Î∞è ÏàòÏ†ï</div>
                <div class="prodDetail_title_second">ÏÉÅÌíà ÏàòÏ†ï</div>
            </div>

            <div class="product_insert_information_container">
                <div class="div_basic_info insert_box">
                    <div class="div_info_name">Í∏∞Î≥∏Ï†ïÎ≥¥</div>
                    <hr>
                    <div class="div_state align_center_and_margin_bottom">
                        <div class="label_name">
                            ÌåêÎß§ÏÉÅÌÉú
                        </div>
                        <div class="radio_btn_container">
                            <label for="sale_state_1" class="radio_btn">
                                <input class="radio_input" type="radio" id="sale_state_1" name="productState" value="ÌåêÎß§Í∞ÄÎä•">
                                <span class="radio_span">ÌåêÎß§Í∞ÄÎä•</span>
                            </label>
                            <label for="sale_state_2" class="radio_btn">
                                <input class="radio_input" type="radio" id="sale_state_2" name="productState" value="ÌåêÎß§Ï§ë">
                                <span class="radio_span">ÌåêÎß§Ï§ë</span>
                            </label>
                            <label for="sale_state_3" class="radio_btn">
                                <input class="radio_input" type="radio" id="sale_state_3" name="productState" value="ÌíàÏ†à">
                                <span class="radio_span">ÌíàÏ†à</span>
                            </label>
                            <label for="sale_state_4" class="radio_btn">
                                <input class="radio_input" type="radio" id="sale_state_4" name="productState" value="ÌåêÎß§Ï§ëÏßÄ">
                                <span class="radio_span">ÌåêÎß§Ï§ëÏßÄ</span>
                            </label>
                        </div>
                    </div>
                    <div class="div_category align_center_and_margin_bottom">
                        <div class="label_name">Ïπ¥ÌÖåÍ≥†Î¶¨</div>
                        <div class="div_input_and_api">
                            <div class="select_category_box_div">
                                <div class="select_categoryList_container">
                                    <div class="category_list_boxes">
                                        <div class="cate_list_box">
                                            <div class="cate_depth_label">1Ï∞® Î∂ÑÎ•ò</div>
                                            <div class="cate_depth_container cate_depth_div_contain">
                                                <div class="depth_list category_hover" th:each="category : ${category}" th:if="${category.depth == 1}">
                                                    <label th:for="'selectedCategory_' + ${category.categoryId}" class="radio_span_label">
                                                        <input type="radio" th:id="'selectedCategory_' + ${category.categoryId}" name="selectedCategory" th:data-category-id="${category.categoryId}" th:value="${category.categoryName}" onchange="showDepth2List(this)">
                                                        <span class="first_cate_name" th:text="${category.categoryName}"></span>
                                                        <span><i class="fa-solid fa-caret-right fa-xs" style="color: #858796;"></i></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="cate_list_box">
                                            <div class="cate_depth_label">2Ï∞® Î∂ÑÎ•ò</div>
                                            <div class="cate_depth_container">
                                                <div id="2depthList" class="cate_depth_div_contain"></div>
                                            </div>
                                        </div>
                                        <div class="cate_list_box">
                                            <div class="cate_depth_label">3Ï∞® Î∂ÑÎ•ò</div>
                                            <div class="cate_depth_container">
                                                <div id="3depthList" class="cate_depth_div_contain"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:each="thirdCate : ${category}">
                                        <span th:if="${product.categoryEntity.categoryId} == ${thirdCate.categoryId}">
                                            <input type="hidden" id="parentCateId" th:value="${thirdCate.parentId}">
                                            <span th:each="secondCate : ${category}" th:if="${thirdCate.parentId} == ${secondCate.categoryId}">
                                                <input type="hidden" id="grandParentCateId" th:value="${secondCate.parentId}">
                                            </span>
                                        </span>
                                    </div>
                                    <div class="select_cate_name_container">
                                        <div class="select_cate_name_title">ÏÑ†ÌÉùÌïú Ïπ¥ÌÖåÍ≥†Î¶¨ üëâ</div>
                                        <div class="select_cate_name_1 select_cate_name_box"></div>
                                        <span class="select_cate_name_arrow"><i class="fa-solid fa-caret-right fa-xs"></i></span>
                                        <div class="select_cate_name_2 select_cate_name_box"></div>
                                        <span class="select_cate_name_arrow"><i class="fa-solid fa-caret-right fa-xs"></i></span>
                                        <div class="select_cate_name_3 select_cate_name_box"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="div_toggle_label_container">
                                <div class="toggle_btn_container">
                                    <input type="checkbox" id="api_toggle_btn" class="sc-gJwTLC ikxBAC">
                                    <label for="api_toggle_btn" class="ai_toggle_label_text">AIÎ°ú ÌÇ§ÏõåÎìú ÎßåÎì§Í∏∞</label>
                                </div>
                                <div class="label_api_container">
                                    <hr class="label_box_hr">
                                    <div class="visionAPI">
                                        <label for="fileInput" style="display: inline-block;">
                                            <div class="drop_zone" id="dropZone" onmouseover="handleMouseOver(event);"
                                                 onmouseout="handleMouseOut(event);" ondragover="handleDragOver(event);"
                                                 ondragleave="handleDragLeave(event);" ondrop="handleDrop(event);">
                                                <input type="file" class="input_type_file" id="fileInput" name="files"
                                                       accept="image/*"
                                                       onchange="handleFileInput()"/>
                                                <p class="visionAPI_P_draghere">Ïó¨Í∏∞Ïóê Ïù¥ÎØ∏ÏßÄÎ•º ÎìúÎûòÍ∑∏ÌïòÏÑ∏Ïöî</p>
                                            </div>
                                        </label>
                                        <div class="image_box" id="imageDiv"></div>
                                    </div>
                                    <div class="div_labeling_result">
                                        <div class="label_result_name_bax">ÎùºÎ≤®ÎßÅ Í≤∞Í≥º</div>
                                        <hr class="label_box_hr">
                                        <div class="result_box">
                                            <div class="result_label_list label_box" id="labelList"></div>
                                        </div>
                                        <div class="label_result_name_bax">ÏÑ†ÌÉùÌïú ÌÇ§ÏõåÎìú</div>
                                        <hr class="label_box_hr">
                                        <div class="check_label_box">
                                            <ul class="result_check_label_list label_box" id="checkedLabelList"></ul>
                                        </div>
                                    </div>
                                    <div class="div_btn_gpt">
                                        <button type="button" id="btnGPT" name="btnGPT" class="btn_gpt">AIÏóêÍ≤å ÌÇ§ÏõåÎìú Ï∂îÏ≤úÎ∞õÍ∏∞</button>
                                    </div>
                                    <div class="div_gpt_result">
                                        <div class="label_result_name_bax">AIÍ∞Ä Ï∂îÏ≤úÌïòÎäî ÌÇ§ÏõåÎìú</div>
                                        <div class="gpr_recommend_box">
                                            <div id="gptRecommend">
                                                <div class="gptRecommTitle">‚ñ∂ Ï∂îÏ≤ú ÌÇ§ÏõåÎìú</div>
                                                <div id="gptRecommendCategory"></div>
                                                <div class="gptRecommTitle">‚ñ∂ Ï∂îÏ≤ú ÏÉÅÏÑ∏ÏÑ§Î™Ö Î¨∏Íµ¨</div>
                                                <div id="gptRecommendDescription"></div>
                                            </div>
                                            <hr>
                                            <div id="selectRecommends">
                                                <div id="selectRecommendCategory"></div>
                                                <div id="selectRecommendDescription"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="div_prod_name align_center_and_margin_bottom">
                        <div class="label_name">ÏÉÅÌíàÎ™Ö</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style" name="productName" th:value="${product.productName}">
                        </div>
                    </div>
                    <div class="div_prod_code align_center_and_margin_bottom">
                        <div class="label_name">ÏÉÅÌíàÏΩîÎìú</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style" name="productCode" th:value="${product.productCode}">
                        </div>
                    </div>
                    <div class="div_prod_brand align_center_and_margin_bottom">
                        <div class="label_name">Î∏åÎûúÎìúÎ™Ö</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style" name="productBrand" th:value="${product.productBrand}">
                        </div>
                    </div>
                    <div class="div_prod_maker align_center_and_margin_bottom">
                        <div class="label_name">Ï†úÏ°∞ÏÇ¨</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style" name="manufacturer" th:value="${product.manufacturer}">
                        </div>
                    </div>
                </div>

                <div class="div_price_info insert_box">
                    <div class="div_info_name">Í∞ÄÍ≤©Ï†ïÎ≥¥</div>
                    <hr>
                    <div class="div_price_original align_center_and_margin_bottom">
                        <div class="label_name">Ï†ïÏÉÅÍ∞Ä</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style price_align" name="originalPrice" onkeyup="inputPriceFormat(this)" th:value="${product.originalPrice}">
                            <span class="price_span_won">Ïõê</span>
                        </div>
                    </div>
                    <div class="div_price_discount align_center_and_margin_bottom">
                        <div class="label_name">ÌåêÎß§Í∞Ä</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style price_align" name="salePrice" onkeyup="inputPriceFormat(this)" th:value="${product.salePrice}">
                            <span class="price_span_won">Ïõê</span>
                        </div>
                    </div>
                </div>
                <div class="div_product_info insert_box">
                    <div class="div_info_name">ÏÉÅÌíàÏ†ïÎ≥¥</div>
                    <hr>
                    <div class="div_img_main align_center_and_margin_bottom">
                        <div class="label_name">ÎåÄÌëúÏù¥ÎØ∏ÏßÄ</div>
                        <div class="main_image_container">
                            <div class="image_thumbnail" id="mainThumbnail">
                                <span th:each="image : ${prodImage}">
                                <input type="hidden" id="mainImagePath" th:if="${image.prodImageType} == 'Î©îÏù∏Ïù¥ÎØ∏ÏßÄ'" th:value="${image.prodImagePath}">
                                <i class="fa-regular fa-image" onclick="mainFileUpload()"></i>
                                </span>
                            </div>
                            <div class="file_btn_container">
                                <label for="mainImage" class="file_label_btn">Î©îÏù∏ Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú</label>
                                <input class="img_file_input" type="file" id="mainImage" name="mainImage" onchange="setMainThumbnail(event);">
                                <input class="main_file_name file_name" th:each="image : ${prodImage}" th:if="${image.prodImageType} == 'Î©îÏù∏Ïù¥ÎØ∏ÏßÄ'" th:value="${image.prodImageOriginName}" readonly>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="div_img_sub align_center_and_margin_bottom">
                        <div class="label_name">Ï∂îÍ∞ÄÏù¥ÎØ∏ÏßÄ</div>
                        <div class="sub_images_container">
                            <div class="image_thumbnail" id="subThumbnail">
                                <span class="sub_image_span" th:each="images : ${prodImage}">
                                <input type="hidden" id="subImagePath" th:if="${images.prodImageType} == 'Ï∂îÍ∞ÄÏù¥ÎØ∏ÏßÄ'" th:value="${images.prodImagePath}">
                                    <input type="hidden" id="subImageName" th:if="${images.prodImageType} == 'Ï∂îÍ∞ÄÏù¥ÎØ∏ÏßÄ'" th:value="${images.prodImageOriginName}">
                                <i class="fa-regular fa-image" onclick="subFileUpload()"></i>
                                <div id="subThumbnails"></div>
                                </span>
                            </div>
                            <div class="file_btn_container">
                                <label for="subImages" class="file_label_btn">Ï∂îÍ∞Ä Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú</label>
                                <input class="img_file_input" type="file" id="subImages" name="subImages" onchange="setSubThumbnail(event);" multiple>
                                <input class="sub_file_name file_name" readonly>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="div_detail_info insert_box">
                    <div class="div_info_name">ÏÉÅÏÑ∏Ï†ïÎ≥¥</div>
                    <hr>
                    <div class="div_info_stock align_center_and_margin_bottom">
                        <div class="label_name">Ïû¨Í≥†Ïàò</div>
                        <div class="input_box_div">
                            <input type="text" class="input_text_style" name="productStock" th:value="${product.salePrice}">
                        </div>
                    </div>
                    <!--            <div class="div_info_option align_center_and_margin_bottom">-->
                    <!--                <div class="label_name">ÏÉÅÌíàÏòµÏÖò</div>-->
                    <!--                <div class="option_box">-->
                    <!--                    <div class="option_input_container">-->
                    <!--                        <div class="input_box_div" id="optionInputBox">-->
                    <!--                            <input type="text" class="input_text_style">-->
                    <!--                        </div>-->
                    <!--                        <div class="plus_icon_div">-->
                    <!--                            <i class="fa-regular fa-square-plus" onclick="addOptionInput()"></i>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                </div>-->
                    <!--            </div>-->
                    <div class="div_info_detail align_center_and_margin_bottom">
                        <div class="label_name">ÏÉÅÌíà ÏÉÅÏÑ∏ Ï†ïÎ≥¥</div>
                        <div class="summer_note_container">
                            <textarea class="summernote" id="summernote" name="productContent" th:text="${product.productContent}"></textarea>
                        </div>
                    </div>
                </div>
                <div class="div_delivery_info_container insert_box">
                    <div class="div_info_name">Î∞∞ÏÜ°Ï†ïÎ≥¥</div>
                    <hr>
                    <div class="div_delivery_info align_center_and_margin_bottom">
                        <div class="label_name">Î∞∞ÏÜ°Ï†ïÎ≥¥</div>
                        <select>
                            <option selected>ÏÑ†ÌÉù</option>
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                        </select>
                    </div>
                </div>
                <div class="div_connect_info insert_box">
                    <div class="div_info_name">Ïó∞ÎèôÏ†ïÎ≥¥</div>
                    <hr>
                    <div class="div_connect_setting align_center_and_margin_bottom">
                        <div class="label_name">Ïó∞ÎèôÏÑ§Ï†ï</div>
                        <div class="div_connect_list">
                            <div class="toggle_btn_container">
                                <div class="div_toggle_btn_label_span">
                                    <input id="smartstoreCheck" type="checkbox" class="sc-gJwTLC ikxBAC"/>
                                    <label for="smartstoreCheck">
                                        <span>Ïä§ÎßàÌä∏Ïä§ÌÜ†Ïñ¥</span>
                                    </label>
                                </div>
                                <div class="div_toggle_btn_label_span">
                                    <input id="coupangCheck" type="checkbox" class="sc-gJwTLC ikxBAC"/>
                                    <label for="coupangCheck">
                                        <span>Ïø†Ìå°</span>
                                    </label>
                                </div>
                                <div class="div_toggle_btn_label_span">
                                    <input id="gsshopCheck" type="checkbox" class="sc-gJwTLC ikxBAC"/>
                                    <label for="gsshopCheck">
                                        <span>GS SHOP</span>
                                    </label>
                                </div>
                                <div class="div_toggle_btn_label_span">
                                    <input id="lotteonCheck" type="checkbox" class="sc-gJwTLC ikxBAC"/>
                                    <label for="lotteonCheck">
                                        <span>Î°ØÎç∞Ïò®</span>
                                    </label>
                                </div>
                                <div class="div_toggle_btn_label_span">
                                    <input id="todayhouseCheck" type="checkbox" class="sc-gJwTLC ikxBAC"/>
                                    <label for="todayhouseCheck">
                                        <span>Ïò§ÎäòÏùòÏßë</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="btn_container">
                <button class="go_back_btn btn" type="button" onclick="location.href='/dashboard/product';">Î™©Î°ù</button>
                <button type="submit" class="modify_btn btn">ÏàòÏ†ï</button>
            </div>
    </form>
    </div>
</div>

<script src="../JS/productDetail.js"></script>
</body>
</html>